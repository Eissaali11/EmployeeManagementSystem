# نُظم - نظام إدارة الموظفين والمركبات

## نظرة عامة
نُظم هو نظام شامل لإدارة الموظفين والمركبات باللغة العربية، مصمم خصيصاً للشركات والمؤسسات في المملكة العربية السعودية.

## الميزات الرئيسية
- ✅ إدارة شاملة للموظفين والأقسام
- ✅ نظام حضور وغياب متقدم
- ✅ إدارة الرواتب والبدلات
- ✅ متابعة الوثائق وتواريخ الانتهاء
- ✅ إدارة المركبات والصيانة
- ✅ نظام المستخدمين والصلاحيات
- ✅ تقارير شاملة (PDF/Excel)
- ✅ إشعارات SMS عبر Twilio
- ✅ مصادقة Firebase
- ✅ واجهة عربية متجاوبة
- ✅ نظام تدقيق شامل

## هيكل المشروع

```
نُظم/
├── config/                 # إعدادات النظام
│   ├── settings.py         # إعدادات البيئات المختلفة
│   └── __init__.py
├── core/                   # الوحدات الأساسية
│   ├── app_factory.py      # مصنع التطبيق
│   ├── extensions.py       # ملحقات Flask
│   └── __init__.py
├── services/               # الخدمات المتخصصة
│   ├── auth_service.py     # خدمة المصادقة
│   ├── notification_service.py  # خدمة الإشعارات
│   ├── report_service.py   # خدمة التقارير
│   ├── file_service.py     # خدمة إدارة الملفات
│   └── __init__.py
├── routes/                 # مسارات التطبيق
│   ├── auth.py            # مصادقة المستخدمين
│   ├── attendance.py      # الحضور والغياب
│   ├── departments.py     # إدارة الأقسام
│   ├── employees.py       # إدارة الموظفين
│   ├── salaries.py        # إدارة الرواتب
│   ├── documents.py       # إدارة الوثائق
│   ├── vehicles.py        # إدارة المركبات
│   ├── users.py           # إدارة المستخدمين
│   ├── reports.py         # التقارير
│   └── fees_costs.py      # الرسوم والتكاليف
├── templates/             # قوالب HTML
├── static/               # الملفات الثابتة
├── utils/                # أدوات مساعدة
├── forms/                # نماذج Flask-WTF
├── models.py             # نماذج قاعدة البيانات
├── app.py               # التطبيق الرئيسي
└── main.py              # نقطة البداية
```

## التقنيات المستخدمة
- **Backend**: Python Flask
- **Database**: PostgreSQL + SQLAlchemy ORM
- **Frontend**: Bootstrap 5 + Arabic RTL
- **Authentication**: Firebase Auth
- **Reports**: ReportLab (PDF) + openpyxl (Excel)
- **Notifications**: Twilio SMS
- **File Processing**: Pillow, pandas

## التثبيت والإعداد

### 1. متطلبات النظام
```bash
Python 3.11+
PostgreSQL 12+
```

### 2. المتغيرات البيئية المطلوبة
```env
DATABASE_URL=postgresql://user:password@host:port/database
SESSION_SECRET=your-secret-key
FIREBASE_API_KEY=your-firebase-api-key
FIREBASE_PROJECT_ID=your-firebase-project-id
FIREBASE_APP_ID=your-firebase-app-id
TWILIO_ACCOUNT_SID=your-twilio-sid
TWILIO_AUTH_TOKEN=your-twilio-token
TWILIO_PHONE_NUMBER=your-twilio-phone
```

### 3. تشغيل النظام
```bash
# تثبيت المتطلبات
pip install -r requirements.txt

# تشغيل الخادم
gunicorn --bind 0.0.0.0:5000 --reuse-port --reload main:app
```

## الوحدات الرئيسية

### 1. إدارة الموظفين
- إضافة وتعديل بيانات الموظفين
- رفع الصور والوثائق
- تتبع الحالة الوظيفية
- ربط الموظفين بالأقسام

### 2. الحضور والغياب
- تسجيل الحضور اليومي
- تسجيل الحضور الجماعي للأقسام
- تقارير الحضور التفصيلية
- إحصائيات متقدمة

### 3. إدارة الرواتب
- حساب الرواتب الشهرية
- البدلات والخصومات
- تقارير الرواتب
- إشعارات الرواتب

### 4. إدارة الوثائق
- متابعة تواريخ انتهاء الوثائق
- تنبيهات الانتهاء
- تكاليف التجديد
- أرشفة الوثائق

### 5. إدارة المركبات
- بيانات المركبات الكاملة
- سجل الصيانة
- تسليم واستلام المركبات
- تتبع المستندات

### 6. نظام المستخدمين
- أدوار متعددة (مدير، مشرف، موظف)
- صلاحيات مخصصة لكل وحدة
- ربط المستخدمين بأقسام محددة
- سجل النشاط الشامل

## الأمان والصلاحيات

### أدوار المستخدمين
- **مدير النظام**: وصول كامل لجميع الوحدات
- **مدير القسم**: وصول محدود لقسمه المخصص
- **الموظف**: وصول للقراءة فقط

### نظام الصلاحيات
- صلاحيات على مستوى الوحدة
- تحكم في العمليات (قراءة، إضافة، تعديل، حذف)
- فصل الصلاحيات حسب الأقسام

## التقارير والإحصائيات

### أنواع التقارير
- تقارير الموظفين (PDF/Excel)
- تقارير الحضور والغياب
- تقارير الرواتب الشهرية
- تقارير انتهاء الوثائق
- تقارير المركبات والصيانة

### لوحة المعلومات
- إحصائيات فورية للموظفين
- متابعة الحضور اليومي
- تنبيهات الوثائق المنتهية
- أحدث الأنشطة

## الإشعارات

### إشعارات SMS
- تنبيهات انتهاء الوثائق
- إشعارات الرواتب
- تذكيرات الحضور
- تنبيهات صيانة المركبات

## النسخ الاحتياطي والأمان
- نسخ احتياطية تلقائية لقاعدة البيانات
- تشفير كلمات المرور
- سجل تدقيق شامل لجميع العمليات
- حماية من CSRF

## الدعم والتطوير
- توثيق شامل للكود
- اختبارات آلية
- سجلات مفصلة للأخطاء
- واجهة إدارية سهلة

## الترخيص
هذا النظام مطور خصيصاً للشركات السعودية ويتبع المعايير المحلية.

---

تم تطوير النظام باستخدام أفضل الممارسات في البرمجة والأمان لضمان الاستقرار والأداء العالي.