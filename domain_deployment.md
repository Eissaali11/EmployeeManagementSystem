# دليل رفع نظام إدارة الموظفين إلى دومين Hostinger

هذا الدليل يشرح خطوات رفع نظام إدارة الموظفين إلى دومين مستضاف على Hostinger بشكل تفصيلي.

## الخطوة 1: تجهيز الدومين على Hostinger

1. قم بتسجيل الدخول إلى لوحة تحكم Hostinger (hPanel)
2. انتقل إلى قسم "Domains" أو "المجالات"
3. اختر الدومين الذي تريد استخدامه أو قم بتسجيل دومين جديد
4. تأكد من أن DNS (نظام أسماء النطاقات) مُكوّن بشكل صحيح ويشير إلى خوادم Hostinger

## الخطوة 2: إعداد المساحة المُستضافة

1. انتقل إلى "Hosting" أو "الاستضافة" في لوحة التحكم
2. اربط الدومين بحزمة الاستضافة المناسبة
3. قم بإنشاء قاعدة بيانات PostgreSQL:
   - انتقل إلى قسم "Databases" أو "قواعد البيانات"
   - اختر "PostgreSQL Databases" وانقر على "Create New Database"
   - سجّل معلومات قاعدة البيانات (الاسم، المستخدم، كلمة المرور، المضيف)

## الخطوة 3: رفع الملفات إلى الدومين

### باستخدام مدير الملفات في لوحة التحكم:

1. انتقل إلى "File Manager" أو "مدير الملفات" في لوحة التحكم
2. انتقل إلى المجلد الجذر للدومين (غالباً يكون `public_html` أو مجلد باسم الدومين)
3. قم برفع الملفات:
   - انقر على زر "Upload" أو "رفع"
   - اختر ملف ZIP المضغوط الذي يحتوي على جميع ملفات المشروع
   - بعد الرفع، استخرج الملفات من الأرشيف المضغوط

### باستخدام FTP (بروتوكول نقل الملفات):

1. احصل على بيانات اتصال FTP من لوحة تحكم Hostinger:
   - انتقل إلى "FTP Accounts" أو "حسابات FTP"
   - احصل على عنوان الخادم، اسم المستخدم، كلمة المرور، المنفذ
2. استخدم برنامج FTP مثل FileZilla أو WinSCP:
   - قم بتثبيت البرنامج على جهاز الكمبيوتر الخاص بك
   - أدخل بيانات اتصال FTP للاتصال بالخادم
   - انتقل إلى المجلد الجذر للدومين
   - قم برفع جميع ملفات المشروع من جهازك إلى الخادم

## الخطوة 4: إعداد متغيرات البيئة

### باستخدام ملف .env:

1. انتقل إلى المجلد الجذر للمشروع على الخادم
2. أنشئ ملف `.env` (أو قم بتحرير الملف إذا كان موجوداً)
3. أضف متغيرات البيئة المطلوبة:
   ```
   DATABASE_URL=postgresql://username:password@hostname:port/database_name
   SECRET_KEY=your_secure_random_key
   FLASK_ENV=production
   TWILIO_ACCOUNT_SID=your_twilio_sid
   TWILIO_AUTH_TOKEN=your_twilio_token
   TWILIO_PHONE_NUMBER=your_twilio_phone_number
   ```
4. استبدل القيم بمعلوماتك الفعلية

### باستخدام ملف .htaccess:

إذا لم يكن ملف `.env` مدعوماً، يمكن إضافة المتغيرات إلى ملف `.htaccess`:

1. افتح ملف `.htaccess` في مجلد المشروع
2. أضف السطور التالية:
   ```
   SetEnv DATABASE_URL postgresql://username:password@hostname:port/database_name
   SetEnv SECRET_KEY your_secure_random_key
   SetEnv FLASK_ENV production
   SetEnv TWILIO_ACCOUNT_SID your_twilio_sid
   SetEnv TWILIO_AUTH_TOKEN your_twilio_token
   SetEnv TWILIO_PHONE_NUMBER your_twilio_phone_number
   ```

## الخطوة 5: تكوين Python وتثبيت الحزم

1. اتصل بالخادم باستخدام SSH (إذا كان مدعوماً في حزمة الاستضافة):
   ```bash
   ssh username@hostname
   ```
2. انتقل إلى مجلد المشروع:
   ```bash
   cd /path/to/your/domain/folder
   ```
3. أنشئ بيئة افتراضية:
   ```bash
   python3 -m venv venv
   source venv/bin/activate
   ```
4. قم بتثبيت الحزم المطلوبة:
   ```bash
   pip install -r requirements.txt
   ```

إذا كانت استضافة Hostinger لا تدعم SSH، قد تحتاج إلى طلب دعم تثبيت الحزم من فريق الدعم الفني.

## الخطوة 6: تكوين Python WSGI

1. تأكد من وجود ملف `wsgi.py` في المجلد الرئيسي
2. قم بتكوين ملف `.htaccess` للإشارة إلى ملف WSGI:
   ```
   <IfModule mod_rewrite.c>
       RewriteEngine On
       RewriteCond %{REQUEST_FILENAME} !-f
       RewriteRule ^(.*)$ wsgi.py/$1 [QSA,L]
   </IfModule>
   
   <IfModule mod_fcgid.c>
       AddHandler fcgid-script .py
       FcgidWrapper /usr/local/bin/python3 .py
   </IfModule>
   ```

## الخطوة 7: تكوين قاعدة البيانات وإنشاء الجداول

1. قم بتشغيل سكريبت الإعداد:
   ```bash
   python setup.py
   ```
   
   هذا سيقوم بإنشاء جداول قاعدة البيانات وإنشاء حساب المسؤول الافتراضي.

2. يمكنك أيضًا الوصول إلى `/static/deploy/setup.php` عبر المتصفح للتحقق من الإعدادات وتهيئة النظام.

## الخطوة 8: تكوين HTTPS (بروتوكول نقل النص التشعبي الآمن)

1. انتقل إلى "SSL" في لوحة تحكم Hostinger
2. قم بتفعيل شهادة SSL المجانية للدومين
3. اختر "Force HTTPS" أو "إجبار HTTPS" لتوجيه جميع الزيارات إلى النسخة الآمنة من الموقع

## الخطوة 9: اختبار النظام

1. افتح متصفح ويب وانتقل إلى عنوان دومينك (مثال: `https://yourdomain.com`)
2. تأكد من أن الصفحة الرئيسية تظهر بشكل صحيح
3. جرّب تسجيل الدخول باستخدام بيانات المسؤول الافتراضي:
   - البريد الإلكتروني: admin@example.com
   - كلمة المرور: admin123
4. بعد تسجيل الدخول، قم بتغيير كلمة المرور الافتراضية

## حل المشكلات الشائعة

### خطأ 500 (خطأ داخلي في الخادم):
- تحقق من سجلات الخطأ في لوحة تحكم Hostinger
- تأكد من أن جميع متغيرات البيئة محددة بشكل صحيح
- تحقق من أذونات الملفات (يجب أن تكون 644 للملفات و 755 للمجلدات)

### خطأ في الاتصال بقاعدة البيانات:
- تأكد من أن معلومات الاتصال بقاعدة البيانات صحيحة
- تحقق من أن مستخدم قاعدة البيانات لديه الصلاحيات المناسبة
- تأكد من أن خدمة PostgreSQL نشطة ومتاحة

### مشاكل في العرض والخطوط العربية:
- تأكد من وجود ملف `.htaccess` مع الإعدادات الصحيحة لـ UTF-8
- تحقق من وجود الخطوط العربية في مجلد `static/fonts`
- تأكد من تعيين المنطقة الزمنية الصحيحة

## مزيد من الدعم

إذا واجهت أي مشاكل أثناء عملية النشر، يمكنك:
- مراجعة فريق دعم Hostinger للمساعدة في المسائل المتعلقة بالاستضافة
- استخدام موارد التوثيق المتوفرة في مجلد المشروع
- التحقق من ملف `check_installation.py` للكشف عن المشكلات المحتملة

## بعد النشر

بعد نشر النظام بنجاح، تأكد من:
- تغيير كلمة مرور المسؤول الافتراضي
- إعداد نسخ احتياطي منتظم لقاعدة البيانات
- تحديث النظام دوريًا لضمان الأمان والاستقرار