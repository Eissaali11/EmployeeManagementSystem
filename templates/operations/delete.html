{% extends "layout.html" %}

{% block title %}حذف العملية #{{ operation.id }}{% endblock %}

{% block content %}
<style>
/* تصميم صفحة الحذف */
body {
    background: #1a1a1a;
    color: #ffffff;
}

.delete-container {
    min-height: 80vh;
    display: flex;
    align-items: center;
    justify-content: center;
}

.delete-card {
    background: linear-gradient(135deg, #2d2d2d 0%, #1a1a1a 100%);
    border: 2px solid #dc3545;
    border-radius: 20px;
    padding: 3rem;
    max-width: 600px;
    width: 100%;
    box-shadow: 0 20px 40px rgba(220, 53, 69, 0.3);
    text-align: center;
}

.danger-icon {
    font-size: 5rem;
    color: #dc3545;
    margin-bottom: 2rem;
    animation: pulse-danger 2s infinite;
}

@keyframes pulse-danger {
    0% { opacity: 1; transform: scale(1); }
    50% { opacity: 0.8; transform: scale(1.1); }
    100% { opacity: 1; transform: scale(1); }
}

.operation-details {
    background: rgba(220, 53, 69, 0.1);
    border: 1px solid #dc3545;
    border-radius: 15px;
    padding: 2rem;
    margin: 2rem 0;
}

.action-buttons {
    display: flex;
    gap: 1rem;
    justify-content: center;
    flex-wrap: wrap;
    margin-top: 2rem;
}

.btn-danger-custom {
    background: linear-gradient(45deg, #dc3545, #c82333);
    border: none;
    color: white;
    padding: 1rem 2rem;
    border-radius: 25px;
    font-weight: 600;
    transition: all 0.3s ease;
    text-decoration: none;
    display: inline-block;
}

.btn-danger-custom:hover {
    background: linear-gradient(45deg, #c82333, #dc3545);
    transform: translateY(-2px);
    box-shadow: 0 10px 20px rgba(220, 53, 69, 0.4);
    color: white;
    text-decoration: none;
}

.btn-secondary-custom {
    background: linear-gradient(45deg, #6c757d, #5a6268);
    border: none;
    color: white;
    padding: 1rem 2rem;
    border-radius: 25px;
    font-weight: 600;
    transition: all 0.3s ease;
    text-decoration: none;
    display: inline-block;
}

.btn-secondary-custom:hover {
    background: linear-gradient(45deg, #5a6268, #6c757d);
    transform: translateY(-2px);
    box-shadow: 0 10px 20px rgba(108, 117, 125, 0.4);
    color: white;
    text-decoration: none;
}

.warning-text {
    color: #ffc107;
    font-weight: 600;
    margin-bottom: 1rem;
}
</style>

<div class="container-fluid delete-container">
    <div class="delete-card">
        <!-- أيقونة التحذير -->
        <div class="danger-icon">
            <i class="fas fa-exclamation-triangle"></i>
        </div>
        
        <!-- عنوان التحذير -->
        <h1 class="text-danger mb-4">تأكيد حذف العملية</h1>
        
        <!-- نص التحذير -->
        <div class="warning-text">
            <i class="fas fa-warning me-2"></i>
            تحذير: هذا الإجراء لا يمكن التراجع عنه!
        </div>
        
        <p class="h5 mb-4">هل أنت متأكد من حذف هذه العملية؟</p>
        
        <!-- تفاصيل العملية -->
        <div class="operation-details">
            <h4 class="text-white mb-3">
                <i class="fas fa-info-circle me-2"></i>
                تفاصيل العملية
            </h4>
            
            <div class="row text-start">
                <div class="col-md-6 mb-3">
                    <strong><i class="fas fa-hashtag me-2"></i>رقم العملية:</strong>
                    <div class="mt-1">#{{ operation.id }}</div>
                </div>
                
                <div class="col-md-6 mb-3">
                    <strong><i class="fas fa-tag me-2"></i>العنوان:</strong>
                    <div class="mt-1">{{ operation.title }}</div>
                </div>
                
                <div class="col-md-6 mb-3">
                    <strong><i class="fas fa-cogs me-2"></i>نوع العملية:</strong>
                    <div class="mt-1">
                        {% if operation.operation_type == 'handover' %}
                            <span class="badge bg-info">تسليم/استلام مركبة</span>
                        {% elif operation.operation_type == 'workshop' %}
                            <span class="badge bg-warning">عملية ورشة</span>
                        {% elif operation.operation_type == 'external_authorization' %}
                            <span class="badge bg-primary">تفويض خارجي</span>
                        {% elif operation.operation_type == 'safety_inspection' %}
                            <span class="badge bg-success">فحص سلامة</span>
                        {% endif %}
                    </div>
                </div>
                
                <div class="col-md-6 mb-3">
                    <strong><i class="fas fa-calendar-alt me-2"></i>تاريخ الطلب:</strong>
                    <div class="mt-1">{{ operation.requested_at.strftime('%Y/%m/%d %H:%M') }}</div>
                </div>
                
                <div class="col-md-6 mb-3">
                    <strong><i class="fas fa-flag me-2"></i>الأولوية:</strong>
                    <div class="mt-1">
                        {% if operation.priority == 'urgent' %}
                            <span class="badge bg-danger">عاجل</span>
                        {% elif operation.priority == 'high' %}
                            <span class="badge bg-warning">عالي</span>
                        {% elif operation.priority == 'normal' %}
                            <span class="badge bg-info">عادي</span>
                        {% else %}
                            <span class="badge bg-secondary">منخفض</span>
                        {% endif %}
                    </div>
                </div>
                
                <div class="col-md-6 mb-3">
                    <strong><i class="fas fa-check-circle me-2"></i>الحالة:</strong>
                    <div class="mt-1">
                        {% if operation.status == 'pending' %}
                            <span class="badge bg-warning text-dark">معلقة</span>
                        {% elif operation.status == 'under_review' %}
                            <span class="badge bg-info">تحت المراجعة</span>
                        {% elif operation.status == 'approved' %}
                            <span class="badge bg-success">موافق عليها</span>
                        {% elif operation.status == 'rejected' %}
                            <span class="badge bg-danger">مرفوضة</span>
                        {% endif %}
                    </div>
                </div>
            </div>
            
            {% if operation.description %}
            <div class="mt-3 text-start">
                <strong><i class="fas fa-align-left me-2"></i>الوصف:</strong>
                <div class="mt-2 p-3" style="background: rgba(255,255,255,0.1); border-radius: 8px;">
                    {{ operation.description }}
                </div>
            </div>
            {% endif %}
        </div>
        
        <!-- أزرار الإجراءات -->
        <div class="action-buttons">
            <a href="{{ url_for('operations.view_operation', id=operation.id) }}" 
               class="btn-secondary-custom">
                <i class="fas fa-arrow-right me-2"></i>
                إلغاء والعودة
            </a>
            
            <form method="POST" style="display: inline;">
                <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
                <button type="submit" class="btn-danger-custom" 
                        onclick="return confirm('هل أنت متأكد من الحذف؟ لا يمكن التراجع عن هذا الإجراء!')">
                    <i class="fas fa-trash-alt me-2"></i>
                    تأكيد الحذف
                </button>
            </form>
        </div>
        
        <!-- معلومات إضافية -->
        <div class="mt-4 text-muted">
            <small>
                <i class="fas fa-info-circle me-1"></i>
                سيتم حذف العملية وجميع البيانات المرتبطة بها نهائياً
            </small>
        </div>
    </div>
</div>
{% endblock %}