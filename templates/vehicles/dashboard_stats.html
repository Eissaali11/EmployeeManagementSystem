<!-- لوحة المعلومات المدمجة والاحترافية -->
<div class="row mb-3">
    <div class="col-12">
        <div style="background: linear-gradient(135deg, #1e3a5c 0%, #2d4a6b 100%); border-radius: 20px; padding: 1.5rem; margin-bottom: 1rem; box-shadow: 0 4px 15px rgba(0,0,0,0.1);">
            <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 1rem;">
                <h6 style="color: white; margin: 0; font-weight: 600; font-size: 1rem;">
                    <i class="fas fa-tachometer-alt me-2"></i>لوحة معلومات الوثائق
                </h6>
                <span style="background: rgba(255,255,255,0.2); color: white; padding: 0.3rem 0.8rem; border-radius: 12px; font-size: 0.8rem;">
                    تحديث مباشر
                </span>
            </div>
            
                <!-- الوثائق المنتهية -->
                <div style="background: rgba(255,255,255,0.15); border-radius: 16px; padding: 1rem; text-align: center; backdrop-filter: blur(10px); transition: transform 0.3s ease;" onmouseover="this.style.transform='scale(1.05)'" onmouseout="this.style.transform='scale(1)'">
                    <div style="width: 60px; height: 60px; margin: 0 auto 0.5rem; background: linear-gradient(135deg, #ef4444, #dc2626); border-radius: 50%; display: flex; align-items: center; justify-content: center; box-shadow: 0 4px 15px rgba(239,68,68,0.3);">
                        <i class="fas fa-times-circle" style="color: white; font-size: 1.5rem;"></i>
                    </div>
                    <div style="color: white; font-size: 1.8rem; font-weight: 700; margin-bottom: 0.2rem;">
                        {{ vehicles | selectattr("registration_expiry_date") | selectattr("registration_expiry_date", "lt", now.date()) | list | length + 
                           vehicles | selectattr("insurance_expiry_date") | selectattr("insurance_expiry_date", "lt", now.date()) | list | length + 
                           vehicles | selectattr("inspection_expiry_date") | selectattr("inspection_expiry_date", "lt", now.date()) | list | length + 
                           vehicles | selectattr("authorization_expiry_date") | selectattr("authorization_expiry_date", "lt", now.date()) | list | length }}
                    </div>
                    <div style="color: rgba(255,255,255,0.9); font-size: 0.75rem; font-weight: 500;">وثائق منتهية</div>
                </div>

                <!-- الوثائق المنتهية قريباً -->
                <div style="background: rgba(255,255,255,0.15); border-radius: 16px; padding: 1rem; text-align: center; backdrop-filter: blur(10px); transition: transform 0.3s ease;" onmouseover="this.style.transform='scale(1.05)'" onmouseout="this.style.transform='scale(1)'">
                    <div style="width: 60px; height: 60px; margin: 0 auto 0.5rem; background: linear-gradient(135deg, #f59e0b, #d97706); border-radius: 50%; display: flex; align-items: center; justify-content: center; box-shadow: 0 4px 15px rgba(245,158,11,0.3);">
                        <i class="fas fa-clock" style="color: white; font-size: 1.5rem;"></i>
                    </div>
                    <div style="color: white; font-size: 1.8rem; font-weight: 700; margin-bottom: 0.2rem;">
                        {% set thirty_days_later = (now + timedelta(days=30)).date() %}
                        {% set expiring_total = [] %}
                        {% for vehicle in vehicles %}
                            {% if vehicle.registration_expiry_date and vehicle.registration_expiry_date >= now.date() and vehicle.registration_expiry_date <= thirty_days_later %}
                                {{ expiring_total.append(vehicle) or "" }}
                            {% endif %}
                            {% if vehicle.insurance_expiry_date and vehicle.insurance_expiry_date >= now.date() and vehicle.insurance_expiry_date <= thirty_days_later %}
                                {{ expiring_total.append(vehicle) or "" }}
                            {% endif %}
                            {% if vehicle.inspection_expiry_date and vehicle.inspection_expiry_date >= now.date() and vehicle.inspection_expiry_date <= thirty_days_later %}
                                {{ expiring_total.append(vehicle) or "" }}
                            {% endif %}
                            {% if vehicle.authorization_expiry_date and vehicle.authorization_expiry_date >= now.date() and vehicle.authorization_expiry_date <= thirty_days_later %}
                                {{ expiring_total.append(vehicle) or "" }}
                            {% endif %}
                        {% endfor %}
                        {{ expiring_total | length }}
                    </div>
                    <div style="color: rgba(255,255,255,0.9); font-size: 0.75rem; font-weight: 500;">ستنتهي قريباً</div>
                </div>

                <!-- إجمالي المركبات -->
                <div style="background: rgba(255,255,255,0.15); border-radius: 16px; padding: 1rem; text-align: center; backdrop-filter: blur(10px); transition: transform 0.3s ease;" onmouseover="this.style.transform='scale(1.05)'" onmouseout="this.style.transform='scale(1)'">
                    <div style="width: 60px; height: 60px; margin: 0 auto 0.5rem; background: linear-gradient(135deg, #10b981, #059669); border-radius: 50%; display: flex; align-items: center; justify-content: center; box-shadow: 0 4px 15px rgba(16,185,129,0.3);">
                        <i class="fas fa-car" style="color: white; font-size: 1.5rem;"></i>
                    </div>
                    <div style="color: white; font-size: 1.8rem; font-weight: 700; margin-bottom: 0.2rem;">
                        {{ vehicles | length }}
                    </div>
                    <div style="color: rgba(255,255,255,0.9); font-size: 0.75rem; font-weight: 500;">إجمالي المركبات</div>
                </div>

                <!-- المركبات المتاحة -->
                <div style="background: rgba(255,255,255,0.15); border-radius: 16px; padding: 1rem; text-align: center; backdrop-filter: blur(10px); transition: transform 0.3s ease;" onmouseover="this.style.transform='scale(1.05)'" onmouseout="this.style.transform='scale(1)'">
                    <div style="width: 60px; height: 60px; margin: 0 auto 0.5rem; background: linear-gradient(135deg, #3b82f6, #1d4ed8); border-radius: 50%; display: flex; align-items: center; justify-content: center; box-shadow: 0 4px 15px rgba(59,130,246,0.3);">
                        <i class="fas fa-check-circle" style="color: white; font-size: 1.5rem;"></i>
                    </div>
                    <div style="color: white; font-size: 1.8rem; font-weight: 700; margin-bottom: 0.2rem;">
                        {{ vehicles | selectattr("status", "equalto", "available") | list | length }}
                    </div>
                    <div style="color: rgba(255,255,255,0.9); font-size: 0.75rem; font-weight: 500;">متاحة للاستخدام</div>
                </div>

                <!-- المركبات في المشاريع -->
                <div style="background: rgba(255,255,255,0.15); border-radius: 16px; padding: 1rem; text-align: center; backdrop-filter: blur(10px); transition: transform 0.3s ease;" onmouseover="this.style.transform='scale(1.05)'" onmouseout="this.style.transform='scale(1)'">
                    <div style="width: 60px; height: 60px; margin: 0 auto 0.5rem; background: linear-gradient(135deg, #8b5cf6, #7c3aed); border-radius: 50%; display: flex; align-items: center; justify-content: center; box-shadow: 0 4px 15px rgba(139,92,246,0.3);">
                        <i class="fas fa-project-diagram" style="color: white; font-size: 1.5rem;"></i>
                    </div>
                    <div style="color: white; font-size: 1.8rem; font-weight: 700; margin-bottom: 0.2rem;">
                        {{ vehicles | selectattr("status", "equalto", "in_project") | list | length }}
                    </div>
                    <div style="color: rgba(255,255,255,0.9); font-size: 0.75rem; font-weight: 500;">في المشاريع</div>
                </div>

                <!-- المركبات في الورشة -->
                <div style="background: rgba(255,255,255,0.15); border-radius: 16px; padding: 1rem; text-align: center; backdrop-filter: blur(10px); transition: transform 0.3s ease;" onmouseover="this.style.transform='scale(1.05)'" onmouseout="this.style.transform='scale(1)'">
                    <div style="width: 60px; height: 60px; margin: 0 auto 0.5rem; background: linear-gradient(135deg, #f97316, #ea580c); border-radius: 50%; display: flex; align-items: center; justify-content: center; box-shadow: 0 4px 15px rgba(249,115,22,0.3);">
                        <i class="fas fa-tools" style="color: white; font-size: 1.5rem;"></i>
                    </div>
                    <div style="color: white; font-size: 1.8rem; font-weight: 700; margin-bottom: 0.2rem;">
                        {{ vehicles | selectattr("status", "equalto", "in_workshop") | list | length }}
                    </div>
                    <div style="color: rgba(255,255,255,0.9); font-size: 0.75rem; font-weight: 500;">في الورشة</div>
                </div>
            </div>
        </div>
    </div>
</div>