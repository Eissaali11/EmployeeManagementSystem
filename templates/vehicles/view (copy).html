{% block content %}

<style>
/* ==================================================== */
/*   المرحلة الثانية: التنسيقات الجديدة (CSS)              */
/* ==================================================== */

/* --- 1. متغيرات الألوان والخطوط الأساسية --- */
:root {
    --primary-hue: 210; /* أزرق */
    --primary-color: hsl(var(--primary-hue), 85%, 55%);
    --primary-light: hsl(var(--primary-hue), 90%, 96%);
    --text-dark: #2c3e50; /* لون نص داكن مريح للعين */
    --text-light: #7f8c8d; /* لون نص فاتح للتفاصيل */
    --bg-main: #f4f7f9; /* خلفية الصفحة الرئيسية */
    --bg-card: #ffffff;
    --border-color: #e4e7eb;
    --shadow-light: 0 4px 15px rgba(0, 0, 0, 0.05);
    --shadow-medium: 0 8px 25px rgba(0, 0, 0, 0.08);
    --font-main: 'Cairo', sans-serif;
    --border-radius: 12px;
}

/* --- 2. الهيكل العام للحاوية --- */
.vehicle-details-container {
    display: flex;
    gap: 1.5rem; /* مسافة بين القائمة والمحتوى */
    align-items: flex-start;
}

/* --- 3. تصميم القائمة الجانبية --- */
.vehicle-sidebar {
    width: 260px;
    flex-shrink: 0;
    background-color: var(--bg-card);
    border-radius: var(--border-radius);
    padding: 1rem;
    position: sticky;
    top: 20px; /* لتثبيتها عند التمرير */
    box-shadow: var(--shadow-medium);
    transition: transform 0.3s ease;
}

.sidebar-header {
    text-align: center;
    padding-bottom: 1rem;
    border-bottom: 1px solid var(--border-color);
    margin-bottom: 1rem;
}

.sidebar-header .plate-number {
    font-size: 1.25rem;
    font-weight: 700;
    color: var(--text-dark);
}

.sidebar-header .vehicle-model {
    font-size: 0.9rem;
    color: var(--text-light);
    margin-top: 4px;
}

.sidebar-nav .nav-links {
    list-style: none;
    padding: 0;
    margin: 0;
}

.sidebar-nav .nav-links a {
    display: flex;
    align-items: center;
    padding: 0.8rem 1rem;
    margin-bottom: 0.5rem;
    border-radius: 8px;
    text-decoration: none;
    color: var(--text-dark);
    font-weight: 600;
    transition: all 0.25s ease;
}

.sidebar-nav .nav-links i {
    font-size: 1rem;
    margin-right: 12px; /* تم عكس الاتجاه ليكون مناسباً لـ dir=rtl */
    width: 20px;
    color: var(--text-light);
    transition: all 0.25s ease;
}

.sidebar-nav .nav-links a:hover {
    background-color: var(--primary-light);
    color: var(--primary-color);
}
.sidebar-nav .nav-links a:hover i {
    color: var(--primary-color);
}

.sidebar-nav .nav-links a.active {
    background-color: var(--primary-color);
    color: white;
    box-shadow: 0 5px 15px hsla(var(--primary-hue), 85%, 55%, 0.4);
}
.sidebar-nav .nav-links a.active i {
    color: white;
}


/* --- 4. تصميم منطقة المحتوى الرئيسية --- */
.main-content-area {
    flex-grow: 1;
    min-width: 0; /* هام لمنع المحتوى من التجاوز */
}

/* 4.1 الشريط العلوي للأزرار */
.top-actions-bar {
    background: var(--bg-card);
    padding: 1rem 1.5rem;
    border-radius: var(--border-radius);
    box-shadow: var(--shadow-light);
    margin-bottom: 1.5rem;
    display: flex;
    justify-content: space-between;
    align-items: center;
    flex-wrap: wrap;
    gap: 1rem;
}

.page-title h2 {
    font-size: 1.5rem;
    font-weight: 700;
    margin: 0;
}

/* 4.2 حاوية الأقسام */
.content-section {
    display: none;
    background-color: var(--bg-card);
    border-radius: var(--border-radius);
    box-shadow: var(--shadow-light);
    overflow: hidden; /* لمنع المحتوى من تجاوز الحواف الدائرية */
    animation: fadeIn 0.5s ease-out;
}
.content-section.active {
    display: block;
}
@keyframes fadeIn {
    from { opacity: 0; transform: translateY(20px) scale(0.98); }
    to { opacity: 1; transform: translateY(0) scale(1); }
}

/* تحسين تصميم الـ Card Header داخل الأقسام */
.card-header {
    background-color: transparent !important; /* إلغاء لون bootstrap الافتراضي */
    border-bottom: 1px solid var(--border-color);
    padding: 1rem 1.5rem;
}
.card-header h5 {
    font-weight: 700;
}

.card-body {
    padding: 1.5rem;
}

/* تحسين الجداول */
.table {
    border-collapse: separate;
    border-spacing: 0;
    width: 100%;
}
.table thead {
    background-color: var(--bg-main);
}
.table th, .table td {
    border-color: var(--border-color);
    vertical-align: middle;
}
.table tr:hover {
    background-color: var(--primary-light) !important;
}

/* --- 5. التصميم المتجاوب (Mobile & Tablet) --- */
.mobile-nav-toggle-btn { display: none; } /* إخفاء زر الموبايل افتراضياً */

@media (max-width: 992px) {
    .vehicle-details-container {
        flex-direction: column;
    }
    .vehicle-sidebar {
        /* تحويل القائمة إلى شريط أفقي قابل للتمرير */
        position: static;
        width: 100%;
        box-shadow: var(--shadow-light);
    }
    .sidebar-header {
        display: none; /* إخفاء الهيدر في وضع الموبايل */
    }
    .sidebar-nav {
        overflow-x: auto;
        -webkit-overflow-scrolling: touch; /* لتحسين التمرير على iOS */
    }
    .sidebar-nav .nav-links {
        display: flex;
        flex-wrap: nowrap;
        padding-bottom: 0.5rem;
        margin: 0;
    }
    .sidebar-nav .nav-links li {
        flex-shrink: 0; /* لمنع العناصر من الانضغاط */
    }
    .sidebar-nav .nav-links a {
        justify-content: center;
        margin: 0.25rem;
    }
    .sidebar-nav .nav-links a span {
        display: none; /* إخفاء النص وإظهار الأيقونة فقط لتوفير المساحة */
    }
    .sidebar-nav .nav-links i { margin: 0; }

    /* 
    ملاحظة: التصميم البديل لزر الهمبرغر. يمكنك فك التعليق إذا فضلت هذا الخيار. 
    .vehicle-sidebar {
        position: fixed;
        top: 0;
        left: -300px;
        height: 100%;
        z-index: 1000;
    }
    .vehicle-sidebar.is-visible {
        transform: translateX(300px);
    }
    .mobile-nav-toggle-btn {
        display: block;
        position: fixed;
        top: 20px;
        right: 20px;
        z-index: 1001;
    } 
    */
}

</style>

<!-- ==================================================== -->
<!--   المرحلة الأولى: الهيكل الأساسي الجديد (HTML)         -->
<!-- ==================================================== -->

<div class="vehicle-details-container">

    <!-- 1. القائمة الجانبية (سيتم وضعها على اليسار باستخدام CSS) -->
    <aside id="vehicle-sidebar" class="vehicle-sidebar">
        
        <div class="sidebar-header">
            <!-- سيتم وضع اسم وشعار السيارة هنا -->
            <!-- هذا مكان فارغ سيتم ملؤه لاحقًا -->
        </div>

        <nav class="sidebar-nav">
            <ul class="nav-links">
                <!-- سيتم وضع روابط الأقسام الـ 12 هنا لاحقًا -->
                <!-- مثال: <li><a href="#section-main-info">المعلومات الأساسية</a></li> -->
            </ul>
        </nav>

        <div class="sidebar-footer">
            <!-- يمكن وضع زر العودة هنا ليكون ثابتاً -->
        </div>
    </aside>

    <!-- 2. منطقة المحتوى الرئيسية -->
    <main class="main-content-area">
        
        <!-- زر إظهار القائمة على الشاشات الصغيرة (سيظهر عبر CSS) -->
        <button class="mobile-nav-toggle-btn" aria-label="فتح القائمة">
            <i class="fas fa-bars"></i>
        </button>
        
        <!-- 2.1. شريط الأزرار العلوي (سيتم نقل كودك الأصلي إلى هنا) -->
        <div class="top-actions-bar">
            <div class="page-title">
                <!-- سيتم وضع عنوان "تفاصيل السيارة: ..." هنا -->
            </div>
            <div class="action-buttons">
                <!-- سيتم وضع أزرار (تعديل, حذف, Excel, العودة) هنا -->
            </div>
        </div>

        <!-- 2.2. حاوية التنبيهات (سيتم نقل كودك الأصلي إلى هنا) -->
        <div class="warnings-container">
            <!-- سيتم وضع تنبيهات الفحص إن وجدت هنا -->
        </div>

        <!-- 2.3. حاوية الأقسام التي سيتم عرضها -->
        <div class="sections-content-wrapper">

            <!-- هنا سيتم وضع حاويات الأقسام الـ 12 لاحقًا -->
            <div id="section-main-info" class="content-section"></div>
            <div id="section-license-image" class="content-section"></div>
            <div id="section-rental" class="content-section"></div>
            <div id="section-docs" class="content-section"></div>
            <div id="section-periodic-inspection" class="content-section"></div>
            <div id="section-safety-checks" class="content-section"></div>
            <div id="section-workshop" class="content-section"></div>
            <div id="section-projects" class="content-section"></div>
            <div id="section-drivers" class="content-section"></div>
            <div id="section-handovers" class="content-section"></div>
            <div id="section-authorizations" class="content-section"></div>
            <div id="section-accidents" class="content-section"></div>
            
        </div>
    </main>
</div>

{% endblock %}