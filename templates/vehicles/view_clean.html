{% extends 'layout.html' %}

{% block title %}ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø³ÙŠØ§Ø±Ø©: {{ vehicle.plate_number }}{% endblock %}

{% block head %}
<style>
/* ØªØµÙ…ÙŠÙ… Ø­Ø¯ÙŠØ« ÙˆØ¬Ù…ÙŠÙ„ Ù„Ù„ØµÙØ­Ø© */
.vehicle-detail-container {
    background: #f8f9fa;
    min-height: 100vh;
    padding: 20px 0;
}

.main-card {
    background: #ffffff;
    border-radius: 20px;
    box-shadow: 0 20px 40px rgba(0,0,0,0.1);
    overflow: hidden;
    border: 1px solid #e0e0e0;
}

.vehicle-header {
    background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
    color: white;
    padding: 30px;
    text-align: center;
}

.vehicle-header h1 {
    font-size: 2.5rem;
    margin-bottom: 10px;
    font-weight: 700;
}

.vehicle-header p {
    font-size: 1.1rem;
    opacity: 0.9;
    margin: 0;
}

/* Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠØ© Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© */
.sidebar {
    background: #ffffff;
    border-radius: 15px;
    box-shadow: 0 10px 30px rgba(0,0,0,0.1);
    padding: 0;
    margin-bottom: 20px;
    overflow: hidden;
    border: 1px solid #e0e0e0;
}

.sidebar-header {
    background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
    color: white;
    padding: 20px;
    text-align: center;
    font-weight: 600;
}

.nav-pills .nav-link {
    border-radius: 0;
    border: none;
    color: #2c3e50;
    padding: 15px 20px;
    border-bottom: 1px solid #f0f0f0;
    text-align: right;
    transition: all 0.3s ease;
    background: #ffffff;
    display: flex;
    align-items: center;
    justify-content: space-between;
    font-weight: 500;
}

.nav-pills .nav-link:hover {
    background: #f8f9fa;
    color: #2c3e50;
    transform: translateX(-5px);
}

.nav-pills .nav-link.active {
    background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
    color: white;
    border-color: transparent;
}

.nav-link i {
    margin-left: 10px;
    font-size: 1.2rem;
}

.nav-link .badge {
    font-size: 0.75rem;
    padding: 4px 8px;
}

/* Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ù…Ø­ØªÙˆÙ‰ */
.content-area {
    background: #ffffff;
    border-radius: 15px;
    box-shadow: 0 10px 30px rgba(0,0,0,0.1);
    overflow: hidden;
    border: 1px solid #e0e0e0;
}

.tab-content {
    padding: 30px;
    color: #2c3e50;
}

.tab-pane {
    animation: fadeInUp 0.5s ease;
}

.tab-pane h3 {
    color: #2c3e50;
    font-weight: 600;
    margin-bottom: 25px;
}

@keyframes fadeInUp {
    from {
        opacity: 0;
        transform: translateY(20px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

/* Ø¨Ø·Ø§Ù‚Ø§Øª Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª */
.info-card {
    background: #f8f9fa;
    border-radius: 15px;
    padding: 25px;
    margin-bottom: 20px;
    border: 1px solid #e9ecef;
    box-shadow: 0 5px 15px rgba(0,0,0,0.08);
}

.info-card h5 {
    color: #2c3e50;
    font-weight: 600;
    margin-bottom: 15px;
    display: flex;
    align-items: center;
}

.info-card h5 i {
    margin-left: 10px;
    font-size: 1.3rem;
    color: #3498db;
}

/* Ø§Ù„Ø¬Ø¯Ø§ÙˆÙ„ */
.table {
    border-radius: 10px;
    overflow: hidden;
    box-shadow: 0 5px 15px rgba(0,0,0,0.08);
    background: #ffffff;
}

.table thead th {
    background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
    color: white;
    border: none;
    padding: 15px;
    font-weight: 600;
}

.table tbody td {
    padding: 15px;
    border-bottom: 1px solid #f0f0f0;
    vertical-align: middle;
    color: #2c3e50;
}

.table tbody tr:hover {
    background: #f8f9fa;
}

/* Ø§Ù„Ø£Ø²Ø±Ø§Ø± */
.btn-custom {
    border-radius: 25px;
    padding: 10px 25px;
    font-weight: 600;
    transition: all 0.3s ease;
    border: none;
}

.btn-custom:hover {
    transform: translateY(-2px);
    box-shadow: 0 5px 15px rgba(0,0,0,0.2);
}

.btn-primary-custom {
    background: linear-gradient(135deg, #3498db 0%, #2980b9 100%);
    color: white;
}

.btn-success-custom {
    background: linear-gradient(135deg, #27ae60 0%, #229954 100%);
    color: white;
}

.btn-warning-custom {
    background: linear-gradient(135deg, #e67e22 0%, #d35400 100%);
    color: white;
}

/* Ø§Ù„Ø­Ø§Ù„Ø© Ø§Ù„ÙØ§Ø±ØºØ© */
.empty-state {
    text-align: center;
    padding: 60px 20px;
    color: #7f8c8d;
}

.empty-state i {
    font-size: 4rem;
    margin-bottom: 20px;
    opacity: 0.5;
    color: #bdc3c7;
}

.empty-state h5 {
    margin-bottom: 10px;
    color: #2c3e50;
    font-weight: 600;
}

.empty-state p {
    color: #7f8c8d;
}

/* Ù…ØªØ¬Ø§ÙˆØ¨ */
@media (max-width: 768px) {
    .vehicle-header h1 {
        font-size: 1.8rem;
    }
    
    .nav-pills .nav-link {
        padding: 12px 15px;
        font-size: 0.9rem;
    }
    
    .tab-content {
        padding: 20px;
    }
}

/* Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø¬Ù…ÙŠÙ„Ø© */
.stat-card {
    background: #ffffff;
    border-radius: 15px;
    padding: 25px;
    text-align: center;
    box-shadow: 0 5px 15px rgba(0,0,0,0.08);
    transition: transform 0.3s ease;
    margin-bottom: 20px;
    border: 1px solid #e9ecef;
}

.stat-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 10px 25px rgba(0,0,0,0.15);
}

.stat-card .stat-icon {
    font-size: 3rem;
    margin-bottom: 15px;
}

.stat-card .stat-number {
    font-size: 1.5rem;
    font-weight: 700;
    margin-bottom: 5px;
    color: #2c3e50;
}

.stat-card .stat-label {
    color: #7f8c8d;
    font-size: 0.9rem;
    font-weight: 500;
}
</style>
{% endblock %}

{% block content %}
<div class="vehicle-detail-container">
    <div class="container">
        <!-- Ø§Ù„Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ -->
        <div class="main-card">
            <div class="vehicle-header">
                <h1>ğŸš— {{ vehicle.plate_number }}</h1>
                <p>{{ vehicle.make }} {{ vehicle.model }} - {{ vehicle.year }}</p>
            </div>
            
            <div class="row no-gutters">
                <!-- Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠØ© -->
                <div class="col-md-3">
                    <div class="sidebar">
                        <div class="sidebar-header">
                            <i class="fas fa-list-alt"></i>
                            Ø£Ù‚Ø³Ø§Ù… Ø§Ù„Ø³ÙŠØ§Ø±Ø©
                        </div>
                        <ul class="nav nav-pills flex-column" id="v-pills-tab" role="tablist">
                            <li class="nav-item">
                                <a class="nav-link active" id="overview-tab" data-bs-toggle="pill" href="#overview" role="tab">
                                    <span>
                                        <i class="fas fa-tachometer-alt"></i>
                                        Ù†Ø¸Ø±Ø© Ø¹Ø§Ù…Ø©
                                    </span>
                                    <span class="badge bg-primary">4</span>
                                </a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" id="basic-info-tab" data-bs-toggle="pill" href="#basic-info" role="tab">
                                    <span>
                                        <i class="fas fa-info-circle"></i>
                                        Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©
                                    </span>
                                    <span class="badge bg-secondary">{{ vehicle.status }}</span>
                                </a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" id="handover-tab" data-bs-toggle="pill" href="#handover" role="tab">
                                    <span>
                                        <i class="fas fa-exchange-alt"></i>
                                        Ø§Ù„ØªØ³Ù„ÙŠÙ… ÙˆØ§Ù„Ø§Ø³ØªÙ„Ø§Ù…
                                    </span>
                                    <span class="badge bg-success">{{ handovers|length }}</span>
                                </a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" id="workshop-tab" data-bs-toggle="pill" href="#workshop" role="tab">
                                    <span>
                                        <i class="fas fa-tools"></i>
                                        Ø³Ø¬Ù„Ø§Øª Ø§Ù„ÙˆØ±Ø´Ø©
                                    </span>
                                    <span class="badge bg-warning">{{ workshop_records|length }}</span>
                                </a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" id="documents-tab" data-bs-toggle="pill" href="#documents" role="tab">
                                    <span>
                                        <i class="fas fa-file-alt"></i>
                                        Ø§Ù„ÙˆØ«Ø§Ø¦Ù‚
                                    </span>
                                    <span class="badge bg-info">{{ attachments|length }}</span>
                                </a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" id="license-tab" data-bs-toggle="pill" href="#license" role="tab">
                                    <span>
                                        <i class="fas fa-id-card"></i>
                                        ØµÙˆØ±Ø© Ø§Ù„Ø±Ø®ØµØ©
                                    </span>
                                    <span class="badge bg-primary">{% if vehicle.license_image %}1{% else %}0{% endif %}</span>
                                </a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" id="drive-tab" data-bs-toggle="pill" href="#drive" role="tab">
                                    <span>
                                        <i class="fab fa-google-drive"></i>
                                        Ù…Ù„ÙØ§Øª Google Drive
                                    </span>
                                    <span class="badge bg-success">{% if vehicle.drive_folder_link %}Ù…ØªØµÙ„{% else %}ØºÙŠØ± Ù…ØªØµÙ„{% endif %}</span>
                                </a>
                            </li>
                        </ul>
                    </div>
                </div>
                
                <!-- Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ù…Ø­ØªÙˆÙ‰ -->
                <div class="col-md-9">
                    <div class="content-area">
                        <div class="tab-content" id="v-pills-tabContent">
                            
                            <!-- Ù†Ø¸Ø±Ø© Ø¹Ø§Ù…Ø© -->
                            <div class="tab-pane fade show active" id="overview" role="tabpanel">
                                <h3 class="mb-4">
                                    <i class="fas fa-tachometer-alt text-primary"></i>
                                    Ù†Ø¸Ø±Ø© Ø¹Ø§Ù…Ø© Ø¹Ù„Ù‰ Ø§Ù„Ø³ÙŠØ§Ø±Ø©
                                </h3>
                                
                                <div class="row">
                                    <div class="col-md-6 col-lg-3">
                                        <div class="stat-card">
                                            <div class="stat-icon text-primary">
                                                <i class="fas fa-user"></i>
                                            </div>
                                            <div class="stat-number text-primary">
                                                {% if current_employee %}
                                                    {{ current_employee.name[:10] }}
                                                {% else %}
                                                    ØºÙŠØ± Ù…Ø­Ø¯Ø¯
                                                {% endif %}
                                            </div>
                                            <div class="stat-label">Ø§Ù„Ø³Ø§Ø¦Ù‚ Ø§Ù„Ø­Ø§Ù„ÙŠ</div>
                                        </div>
                                    </div>
                                    
                                    <div class="col-md-6 col-lg-3">
                                        <div class="stat-card">
                                            <div class="stat-icon text-success">
                                                <i class="fas fa-check-circle"></i>
                                            </div>
                                            <div class="stat-number text-success">{{ vehicle.status }}</div>
                                            <div class="stat-label">Ø­Ø§Ù„Ø© Ø§Ù„Ø³ÙŠØ§Ø±Ø©</div>
                                        </div>
                                    </div>
                                    
                                    <div class="col-md-6 col-lg-3">
                                        <div class="stat-card">
                                            <div class="stat-icon text-warning">
                                                <i class="fas fa-wrench"></i>
                                            </div>
                                            <div class="stat-number text-warning">{{ workshop_records|length }}</div>
                                            <div class="stat-label">Ø³Ø¬Ù„Ø§Øª Ø§Ù„ØµÙŠØ§Ù†Ø©</div>
                                        </div>
                                    </div>
                                    
                                    <div class="col-md-6 col-lg-3">
                                        <div class="stat-card">
                                            <div class="stat-icon text-info">
                                                <i class="fas fa-file-alt"></i>
                                            </div>
                                            <div class="stat-number text-info">{{ attachments|length }}</div>
                                            <div class="stat-label">Ø§Ù„ÙˆØ«Ø§Ø¦Ù‚</div>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª Ø³Ø±ÙŠØ¹Ø© -->
                                <div class="info-card mt-4">
                                    <h5>
                                        <i class="fas fa-bolt"></i>
                                        Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª Ø³Ø±ÙŠØ¹Ø©
                                    </h5>
                                    <div class="row">
                                        <div class="col-md-6 mb-3">
                                            <a href="{{ url_for('vehicles.vehicle_license_image', vehicle_id=vehicle.id) }}" class="btn btn-custom btn-primary-custom w-100">
                                                <i class="fas fa-id-card ms-1"></i>
                                                Ø¥Ø¯Ø§Ø±Ø© ØµÙˆØ±Ø© Ø§Ù„Ø±Ø®ØµØ©
                                            </a>
                                        </div>
                                        <div class="col-md-6 mb-3">
                                            <a href="{{ url_for('vehicles.vehicle_drive_files', vehicle_id=vehicle.id) }}" class="btn btn-custom btn-success-custom w-100">
                                                <i class="fab fa-google-drive ms-1"></i>
                                                Ø¥Ø¯Ø§Ø±Ø© Ù…Ù„ÙØ§Øª Drive
                                            </a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© -->
                            <div class="tab-pane fade" id="basic-info" role="tabpanel">
                                <h3 class="mb-4">
                                    <i class="fas fa-info-circle text-primary"></i>
                                    Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©
                                </h3>
                                
                                <div class="info-card">
                                    <h5>
                                        <i class="fas fa-car"></i>
                                        Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø³ÙŠØ§Ø±Ø©
                                    </h5>
                                    <div class="row">
                                        <div class="col-md-6 mb-3">
                                            <strong style="color: #2c3e50;">Ø±Ù‚Ù… Ø§Ù„Ù„ÙˆØ­Ø©:</strong> <span style="color: #34495e;">{{ vehicle.plate_number }}</span>
                                        </div>
                                        <div class="col-md-6 mb-3">
                                            <strong style="color: #2c3e50;">Ø§Ù„Ù…Ø§Ø±ÙƒØ©:</strong> <span style="color: #34495e;">{{ vehicle.make }}</span>
                                        </div>
                                        <div class="col-md-6 mb-3">
                                            <strong style="color: #2c3e50;">Ø§Ù„Ù…ÙˆØ¯ÙŠÙ„:</strong> <span style="color: #34495e;">{{ vehicle.model }}</span>
                                        </div>
                                        <div class="col-md-6 mb-3">
                                            <strong style="color: #2c3e50;">Ø³Ù†Ø© Ø§Ù„ØµÙ†Ø¹:</strong> <span style="color: #34495e;">{{ vehicle.year }}</span>
                                        </div>
                                        <div class="col-md-6 mb-3">
                                            <strong style="color: #2c3e50;">Ø§Ù„Ù„ÙˆÙ†:</strong> <span style="color: #34495e;">{{ vehicle.color }}</span>
                                        </div>
                                        <div class="col-md-6 mb-3">
                                            <strong style="color: #2c3e50;">Ø§Ù„Ø­Ø§Ù„Ø©:</strong> 
                                            <span class="badge bg-success">{{ vehicle.status }}</span>
                                        </div>
                                        {% if vehicle.mileage %}
                                        <div class="col-md-6 mb-3">
                                            <strong>Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ù…Ø³Ø§ÙØ©:</strong> {{ "{:,}".format(vehicle.mileage) }} ÙƒÙ…
                                        </div>
                                        {% endif %}
                                        {% if vehicle.notes %}
                                        <div class="col-12">
                                            <strong>Ù…Ù„Ø§Ø­Ø¸Ø§Øª:</strong>
                                            <div class="alert alert-light mt-2">{{ vehicle.notes }}</div>
                                        </div>
                                        {% endif %}
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Ø§Ù„ØªØ³Ù„ÙŠÙ… ÙˆØ§Ù„Ø§Ø³ØªÙ„Ø§Ù… -->
                            <div class="tab-pane fade" id="handover" role="tabpanel">
                                <h3 class="mb-4">
                                    <i class="fas fa-exchange-alt text-primary"></i>
                                    Ø³Ø¬Ù„ Ø§Ù„ØªØ³Ù„ÙŠÙ… ÙˆØ§Ù„Ø§Ø³ØªÙ„Ø§Ù…
                                </h3>
                                
                                {% if handovers %}
                                <div class="table-responsive">
                                    <table class="table">
                                        <thead>
                                            <tr>
                                                <th>Ø§Ù„ØªØ§Ø±ÙŠØ®</th>
                                                <th>Ø§Ù„Ù†ÙˆØ¹</th>
                                                <th>Ø§Ø³Ù… Ø§Ù„Ø´Ø®Øµ</th>
                                                <th>Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ</th>
                                                <th>Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ù…Ø³Ø§ÙØ©</th>
                                                <th>Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            {% for handover in handovers %}
                                            <tr>
                                                <td>{{ handover.formatted_date }}</td>
                                                <td>
                                                    {% if handover.handover_type == 'delivery' %}
                                                    <span class="badge bg-success">ØªØ³Ù„ÙŠÙ…</span>
                                                    {% else %}
                                                    <span class="badge bg-primary">Ø§Ø³ØªÙ„Ø§Ù…</span>
                                                    {% endif %}
                                                </td>
                                                <td>{{ handover.person_name }}</td>
                                                <td>{{ handover.person_mobile or 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯' }}</td>
                                                <td>{{ "{:,}".format(handover.mileage) if handover.mileage else 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯' }}</td>
                                                <td>
                                                    <a href="{{ url_for('vehicles.view_handover', id=handover.id) }}" class="btn btn-sm btn-custom btn-primary-custom">
                                                        <i class="fas fa-eye"></i>
                                                    </a>
                                                    <a href="{{ url_for('vehicles.edit_handover', id=handover.id) }}" class="btn btn-sm btn-custom btn-warning-custom">
                                                        <i class="fas fa-edit"></i>
                                                    </a>
                                                </td>
                                            </tr>
                                            {% endfor %}
                                        </tbody>
                                    </table>
                                </div>
                                {% else %}
                                <div class="empty-state">
                                    <i class="fas fa-exchange-alt"></i>
                                    <h5>Ù„Ø§ ØªÙˆØ¬Ø¯ Ø³Ø¬Ù„Ø§Øª ØªØ³Ù„ÙŠÙ… ÙˆØ§Ø³ØªÙ„Ø§Ù…</h5>
                                    <p>Ù„Ù… ÙŠØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø£ÙŠ Ø¹Ù…Ù„ÙŠØ§Øª ØªØ³Ù„ÙŠÙ… Ø£Ùˆ Ø§Ø³ØªÙ„Ø§Ù… Ù„Ù‡Ø°Ù‡ Ø§Ù„Ø³ÙŠØ§Ø±Ø© Ø¨Ø¹Ø¯</p>
                                </div>
                                {% endif %}
                            </div>
                            
                            <!-- Ø³Ø¬Ù„Ø§Øª Ø§Ù„ÙˆØ±Ø´Ø© -->
                            <div class="tab-pane fade" id="workshop" role="tabpanel">
                                <h3 class="mb-4">
                                    <i class="fas fa-tools text-primary"></i>
                                    Ø³Ø¬Ù„Ø§Øª Ø§Ù„ÙˆØ±Ø´Ø© ÙˆØ§Ù„ØµÙŠØ§Ù†Ø©
                                </h3>
                                
                                {% if workshop_records %}
                                <div class="table-responsive">
                                    <table class="table">
                                        <thead>
                                            <tr>
                                                <th>ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¯Ø®ÙˆÙ„</th>
                                                <th>Ø§Ù„Ù…Ø´ÙƒÙ„Ø©</th>
                                                <th>Ø§Ø³Ù… Ø§Ù„ÙˆØ±Ø´Ø©</th>
                                                <th>Ø§Ù„ØªÙƒÙ„ÙØ©</th>
                                                <th>Ø§Ù„Ø­Ø§Ù„Ø©</th>
                                                <th>Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            {% for record in workshop_records %}
                                            <tr>
                                                <td>{{ record.formatted_entry_date }}</td>
                                                <td>{{ record.description[:50] }}{% if record.description|length > 50 %}...{% endif %}</td>
                                                <td>{{ record.workshop_name or 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯' }}</td>
                                                <td>{{ "{:,.2f}".format(record.cost) if record.cost else 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯' }} Ø±ÙŠØ§Ù„</td>
                                                <td>
                                                    {% if record.repair_status == 'completed' %}
                                                    <span class="badge bg-success">Ù…ÙƒØªÙ…Ù„</span>
                                                    {% elif record.repair_status == 'in_progress' %}
                                                    <span class="badge bg-warning">Ù‚ÙŠØ¯ Ø§Ù„ØªÙ†ÙÙŠØ°</span>
                                                    {% else %}
                                                    <span class="badge bg-secondary">{{ record.repair_status }}</span>
                                                    {% endif %}
                                                </td>
                                                <td>
                                                    <a href="{{ url_for('vehicles.workshop_details', workshop_id=record.id) }}" class="btn btn-sm btn-custom btn-primary-custom">
                                                        <i class="fas fa-eye"></i>
                                                    </a>
                                                    <a href="{{ url_for('vehicles.edit_workshop', id=record.id) }}" class="btn btn-sm btn-custom btn-warning-custom">
                                                        <i class="fas fa-edit"></i>
                                                    </a>
                                                </td>
                                            </tr>
                                            {% endfor %}
                                        </tbody>
                                    </table>
                                </div>
                                
                                <div class="info-card mt-4">
                                    <h5>
                                        <i class="fas fa-chart-line"></i>
                                        Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„ØµÙŠØ§Ù†Ø©
                                    </h5>
                                    <div class="row">
                                        <div class="col-md-4">
                                            <strong>Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„ØªÙƒÙ„ÙØ©:</strong>
                                            {% set total_cost = workshop_records|sum(attribute='cost') %}
                                            <span class="text-danger">{{ "{:,.2f}".format(total_cost) }} Ø±ÙŠØ§Ù„</span>
                                        </div>
                                        <div class="col-md-4">
                                            <strong>Ø¹Ø¯Ø¯ Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª:</strong>
                                            <span class="text-info">{{ workshop_records|length }} Ø¹Ù…Ù„ÙŠØ©</span>
                                        </div>
                                        <div class="col-md-4">
                                            <strong>Ù…ØªÙˆØ³Ø· Ø§Ù„ØªÙƒÙ„ÙØ©:</strong>
                                            {% if workshop_records|length > 0 %}
                                            <span class="text-warning">{{ "{:,.2f}".format(total_cost / workshop_records|length) }} Ø±ÙŠØ§Ù„</span>
                                            {% else %}
                                            <span class="text-muted">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª</span>
                                            {% endif %}
                                        </div>
                                    </div>
                                </div>
                                {% else %}
                                <div class="empty-state">
                                    <i class="fas fa-tools"></i>
                                    <h5>Ù„Ø§ ØªÙˆØ¬Ø¯ Ø³Ø¬Ù„Ø§Øª ØµÙŠØ§Ù†Ø©</h5>
                                    <p>Ù„Ù… ÙŠØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø£ÙŠ Ø¹Ù…Ù„ÙŠØ§Øª ØµÙŠØ§Ù†Ø© Ù„Ù‡Ø°Ù‡ Ø§Ù„Ø³ÙŠØ§Ø±Ø© Ø¨Ø¹Ø¯</p>
                                </div>
                                {% endif %}
                            </div>
                            
                            <!-- Ø§Ù„ÙˆØ«Ø§Ø¦Ù‚ -->
                            <div class="tab-pane fade" id="documents" role="tabpanel">
                                <h3 class="mb-4">
                                    <i class="fas fa-file-alt text-primary"></i>
                                    Ø§Ù„ÙˆØ«Ø§Ø¦Ù‚ ÙˆØ§Ù„Ù…Ø±ÙÙ‚Ø§Øª
                                </h3>
                                
                                {% if attachments %}
                                <div class="row">
                                    {% for attachment in attachments %}
                                    <div class="col-md-6 col-lg-4 mb-3">
                                        <div class="info-card">
                                            <h6>{{ attachment.title or 'ÙˆØ«ÙŠÙ‚Ø©' }}</h6>
                                            <p class="text-muted small">{{ attachment.description or 'Ù„Ø§ ÙŠÙˆØ¬Ø¯ ÙˆØµÙ' }}</p>
                                            <a href="{{ url_for('static', filename='uploads/vehicles/' + attachment.file_path) }}" target="_blank" class="btn btn-sm btn-custom btn-primary-custom w-100">
                                                <i class="fas fa-download ms-1"></i>
                                                Ø¹Ø±Ø¶ Ø§Ù„Ù…Ù„Ù
                                            </a>
                                        </div>
                                    </div>
                                    {% endfor %}
                                </div>
                                {% else %}
                                <div class="empty-state">
                                    <i class="fas fa-file-alt"></i>
                                    <h5>Ù„Ø§ ØªÙˆØ¬Ø¯ ÙˆØ«Ø§Ø¦Ù‚</h5>
                                    <p>Ù„Ù… ÙŠØªÙ… Ø±ÙØ¹ Ø£ÙŠ ÙˆØ«Ø§Ø¦Ù‚ Ù„Ù‡Ø°Ù‡ Ø§Ù„Ø³ÙŠØ§Ø±Ø© Ø¨Ø¹Ø¯</p>
                                </div>
                                {% endif %}
                            </div>
                            
                            <!-- ØµÙˆØ±Ø© Ø§Ù„Ø±Ø®ØµØ© -->
                            <div class="tab-pane fade" id="license" role="tabpanel">
                                <h3 class="mb-4">
                                    <i class="fas fa-id-card text-primary"></i>
                                    ØµÙˆØ±Ø© Ø±Ø®ØµØ© Ø§Ù„Ø³ÙŠØ§Ø±Ø©
                                </h3>
                                
                                {% if vehicle.license_image %}
                                <div class="text-center">
                                    <img src="{{ url_for('static', filename='uploads/licenses/' + vehicle.license_image) }}" class="img-fluid rounded shadow" style="max-height: 500px;" alt="ØµÙˆØ±Ø© Ø§Ù„Ø±Ø®ØµØ©">
                                    <div class="mt-3">
                                        <a href="{{ url_for('vehicles.vehicle_license_image', vehicle_id=vehicle.id) }}" class="btn btn-custom btn-warning-custom">
                                            <i class="fas fa-edit ms-1"></i>
                                            ØªØ­Ø¯ÙŠØ« Ø§Ù„ØµÙˆØ±Ø©
                                        </a>
                                    </div>
                                </div>
                                {% else %}
                                <div class="empty-state">
                                    <i class="fas fa-id-card"></i>
                                    <h5>Ù„Ø§ ØªÙˆØ¬Ø¯ ØµÙˆØ±Ø© Ø±Ø®ØµØ©</h5>
                                    <p>Ù„Ù… ÙŠØªÙ… Ø±ÙØ¹ ØµÙˆØ±Ø© Ø±Ø®ØµØ© Ù„Ù‡Ø°Ù‡ Ø§Ù„Ø³ÙŠØ§Ø±Ø© Ø¨Ø¹Ø¯</p>
                                    <a href="{{ url_for('vehicles.vehicle_license_image', vehicle_id=vehicle.id) }}" class="btn btn-custom btn-primary-custom">
                                        <i class="fas fa-upload ms-1"></i>
                                        Ø±ÙØ¹ ØµÙˆØ±Ø© Ø§Ù„Ø±Ø®ØµØ©
                                    </a>
                                </div>
                                {% endif %}
                            </div>
                            
                            <!-- Ù…Ù„ÙØ§Øª Drive -->
                            <div class="tab-pane fade" id="drive" role="tabpanel">
                                <h3 class="mb-4">
                                    <i class="fab fa-google-drive text-primary"></i>
                                    Ù…Ù„ÙØ§Øª Google Drive
                                </h3>
                                
                                {% if vehicle.drive_folder_link %}
                                <div class="info-card">
                                    <h5>
                                        <i class="fas fa-link"></i>
                                        Ø±Ø§Ø¨Ø· Ù…Ø¬Ù„Ø¯ Google Drive
                                    </h5>
                                    <p>ØªÙ… Ø±Ø¨Ø· Ù‡Ø°Ù‡ Ø§Ù„Ø³ÙŠØ§Ø±Ø© Ø¨Ù…Ø¬Ù„Ø¯ Google Drive</p>
                                    <div class="d-flex gap-3">
                                        <a href="{{ vehicle.drive_folder_link }}" target="_blank" class="btn btn-custom btn-success-custom">
                                            <i class="fab fa-google-drive ms-1"></i>
                                            ÙØªØ­ Ø§Ù„Ù…Ø¬Ù„Ø¯
                                        </a>
                                        <a href="{{ url_for('vehicles.vehicle_drive_files', vehicle_id=vehicle.id) }}" class="btn btn-custom btn-primary-custom">
                                            <i class="fas fa-edit ms-1"></i>
                                            Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø±Ø§Ø¨Ø·
                                        </a>
                                    </div>
                                </div>
                                {% else %}
                                <div class="empty-state">
                                    <i class="fab fa-google-drive"></i>
                                    <h5>ØºÙŠØ± Ù…Ø±ØªØ¨Ø· Ø¨Ù€ Google Drive</h5>
                                    <p>Ù„Ù… ÙŠØªÙ… Ø±Ø¨Ø· Ù‡Ø°Ù‡ Ø§Ù„Ø³ÙŠØ§Ø±Ø© Ø¨Ù…Ø¬Ù„Ø¯ Google Drive Ø¨Ø¹Ø¯</p>
                                    <a href="{{ url_for('vehicles.vehicle_drive_files', vehicle_id=vehicle.id) }}" class="btn btn-custom btn-success-custom">
                                        <i class="fas fa-link ms-1"></i>
                                        Ø±Ø¨Ø· Ù…Ø¬Ù„Ø¯ Drive
                                    </a>
                                </div>
                                {% endif %}
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Ø²Ø± Ø§Ù„Ø¹ÙˆØ¯Ø© -->
        <div class="text-center mt-4">
            <a href="{{ url_for('vehicles.index') }}" class="btn btn-custom btn-primary-custom btn-lg">
                <i class="fas fa-arrow-right ms-2"></i>
                Ø§Ù„Ø¹ÙˆØ¯Ø© Ø¥Ù„Ù‰ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø³ÙŠØ§Ø±Ø§Øª
            </a>
        </div>
    </div>
</div>
{% endblock %}